---
interface Props {
  slides: CardBase[];
}
const { slides } = Astro.props;

import "flickity/css/flickity.css";
import { Image } from "@astrojs/image/components";
import type { CardBase } from "./Card.astro";
---

<div class="main-carousel">
  {
    slides.map(
      (slide) =>
        slide.imageUrl && (
          <a href={slide.link} class="carousel-cell mr-4 lg:w-1/2">
            <Image
              src={slide.imageUrl}
              width={1600}
              height={900}
              format="webp"
              alt="homepage banner images"
              class="rounded shadow-md"
            />
            <div class="absolute inset-0 flex items-center justify-center">
              <div class="w-full h-full bg-black opacity-30 absolute" />
              <div
                class:list={[
                  "slide-intro opacity-0 transition duration-300",
                  "px-16 lg:px-20 gap-4 w-full z-10 flex flex-col items-center pt-4 lg:pt-0",
                ]}
              >
                <h2 class="text-xl lg:text-5xl font-black text-white text-center truncate w-full ">
                  {slide.title}
                </h2>
                <p class="hidden lg:block truncate text-white font-semibold text-lg lg:text-xl w-full">
                  {slide.description}
                </p>
                <button
                  class:list={[
                    "border-white border-2 rounded text-white font-semibold",
                    "lg:text-xl px-2 lg:px-4 py-1 lg:py-2",
                    "bg-black bg-opacity-30",
                  ]}
                >
                  Learn more
                </button>
              </div>
            </div>
          </a>
        )
    )
  }
</div>

<script>
  import Flickity from "flickity";
  new Flickity(".main-carousel", {
    autoPlay: 3000,
    wrapAround: true,
  });
</script>

<style>
  .carousel-cell.is-selected .slide-intro {
    opacity: 1;
  }
</style>
